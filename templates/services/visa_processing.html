{% extends "base.html" %}
{% from "components/_form_macros.html" import render_field %}

{% block title %}{{ title }} - Bolakin Edu-Consult{% endblock %}

{% block extra_css %}
<style>
    .service-form-container {
        max-width: 800px;
        margin: 40px auto;
        padding: 30px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    .service-form-container h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
    }
    .form-group label {
        font-weight: 600;
    }
    .form-control:focus {
        border-color: #FF9933;
        box-shadow: 0 0 0 0.2rem rgba(255, 153, 51, 0.25);
    }
    .btn-primary {
        background-color: #FF9933;
        border-color: #FF9933;
        padding: 10px 20px;
        font-size: 1.1em;
    }
    .btn-primary:hover {
        background-color: #FF8C00;
        border-color: #FF8C00;
    }
    /* Optional: JavaScript to show/hide 'Other Visa Type' field */
    #other_visa_type_field {
        display: none; /* Initially hidden */
        margin-top: 10px;
    }
</style>
{% endblock %}

{% block content %}
<div class="service-form-container">
    <h1>{{ title }}</h1>
    <p class="text-muted text-center mb-4">Please fill out the form below to request our visa processing services. We'll get back to you as soon as possible.</p>
    
    <form method="POST" action="{{ url_for('main.visa_processing_request') }}" novalidate>
        {{ form.hidden_tag() }} <!-- CSRF token -->

        {{ render_field(form.full_name, class="form-control", placeholder="Enter your full name") }}
        {{ render_field(form.email, class="form-control", placeholder="your.email@example.com") }}
        {{ render_field(form.phone, class="form-control", placeholder="+1234567890") }}
        {{ render_field(form.destination_country, class="form-control", placeholder="e.g., Canada, USA, UK") }}
        
        <div class="form-group mb-3">
            {{ form.visa_type.label(class="form-label") }}
            {{ form.visa_type(class="form-select" + (" is-invalid" if form.visa_type.errors else ""), id="visa_type_select") }}
            {% if form.visa_type.errors %}
                <div class="invalid-feedback">
                    {% for error in form.visa_type.errors %}{{ error }}{% endfor %}
                </div>
            {% endif %}
        </div>

        <div id="other_visa_type_field" class="form-group mb-3">
            {{ render_field(form.other_visa_type, class="form-control", placeholder="Please specify the visa type") }}
        </div>

        {{ render_field(form.preferred_appointment_date, class="form-control") }}
        {{ render_field(form.message, class="form-control", rows=5, placeholder="Tell us more about your visa needs...") }}

        <div class="text-center mt-4">
            {{ form.submit(class="btn btn-primary btn-lg") }}
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const visaTypeSelect = document.getElementById('visa_type_select');
    const otherVisaTypeField = document.getElementById('other_visa_type_field');

    if (visaTypeSelect && otherVisaTypeField) {
        function toggleOtherVisaField() {
            if (visaTypeSelect.value === 'Other') {
                otherVisaTypeField.style.display = 'block';
            } else {
                otherVisaTypeField.style.display = 'none';
            }
        }
        // Initial check
        toggleOtherVisaField();
        // Add event listener
        visaTypeSelect.addEventListener('change', toggleOtherVisaField);
    }
});
</script>
{% endblock %} 